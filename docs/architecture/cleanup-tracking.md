# Architecture Cleanup Tracking

This document tracks tasks to improve the codebase structure and resolve outstanding issues after the initial Next.js 15 SSR migration.

| Area / Task                                     | Files Involved (Primary)                                  | Status   | Notes                                                                                                                                                                                                                                                          |
|-------------------------------------------------|-----------------------------------------------------------|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **1. Fix `lib/hooks/useQuotationService.ts`**   | `lib/hooks/useQuotationService.ts`, `hooks/useQuotationService.ts` (original source) | **Done** | The current `lib/hooks/useQuotationService.ts` is broken (likely truncated or corrupted, showing 1240 lines instead of original ~2105) and has many linter errors. Restore full content from original `hooks/useQuotationService.ts` and fix any genuine errors. |
| **2. Consolidate All Hooks to `lib/hooks/`**    | `hooks/*` (all files in root `hooks/`), `lib/hooks/*`         | **Done** | Move all remaining custom hooks from the root `hooks/` directory to `lib/hooks/`. Update all import statements across the codebase to reflect the new paths (e.g., `from '@/hooks/...'` to `from '@/lib/hooks/...'`).                                         |
| **3. Update Supabase Client Instantiation**     | `lib/supabase/client.ts`, `lib/supabase/middleware.ts`, `lib/supabase/index.ts`, various components/hooks | **Done** | Create a new `lib/supabase/index.ts` exporting `createClient` (client), `createServerClient` (server), and `updateSession` (middleware helper in `lib/supabase/middleware.ts`). Update all Supabase client imports and usage. Delete old `lib/supabase/client.ts`. |
| **4. Verify and Delete Legacy `pages/` Directory** | `pages/` (entire directory, especially `pages/api/`)        | **Done** | Confirmed that all functionality previously provided by routes in `pages/api/` has been successfully migrated to `app/api/` route handlers. Deleted the entire `pages/` directory.                                                  |
| **5. Reconcile Next.js Configurations**         | `next.config.js`, `next.config.mjs`                       | **Done** | Determined active Next.js configuration (`next.config.mjs`), merged settings from `next.config.js`, and deleted the redundant file.                            |
| **6. Review/Remove Prisma Usage**               | `lib/prisma.ts`, `package.json`                           | **Done** | If Prisma is not actively being used for data access in the project, delete the `lib/prisma.ts` file and remove Prisma-related dependencies from `package.json`.                                                                                  |
| **7. Review/Delete Root `db/` Directory**       | `db/` (root directory)                                    | **Done** | The root `db/` directory was empty and has been deleted.                                                                                                      |
| **8. Delete Temporary `temp_fonts/` Directory** | `temp_fonts/`                                             | **Done** | The `temp_fonts/` directory contained a zip file and appeared temporary. It has been deleted.                                                                                                                                                                      | 